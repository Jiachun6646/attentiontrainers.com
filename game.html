<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>专注力计时挑战</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background-color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            width: 100%;
            overflow: hidden;
        }
        
        .container {
            width: 90%;
            max-width: 600px;
            text-align: center;
        }
        
        h1 {
            color: #333;
            margin-bottom: 20px;
            font-size: 2rem;
        }
        
        .game-description {
            color: #666;
            margin-bottom: 30px;
            font-size: 1rem;
            line-height: 1.5;
        }
        
        .timer-display {
            font-size: 5rem;
            font-weight: bold;
            color: #333;
            margin: 20px 0;
        }
        
        .controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .target-input {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .time-input {
            padding: 8px;
            font-size: 1rem;
            width: 120px;
            text-align: center;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        
        button {
            padding: 12px 20px;
            font-size: 1rem;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #45a049;
        }
        
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        
        .progress-container {
            width: 100%;
            height: 20px;
            background-color: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress-bar {
            height: 100%;
            background-color: #4CAF50;
            width: 0%;
            transition: width 0.1s linear;
        }
        
        .status-message {
            font-size: 1.2rem;
            margin: 10px 0;
            min-height: 1.5em;
        }
        
        .hidden {
            display: none;
        }

        .difficulty-select {
            margin-bottom: 15px;
        }
        
        .difficulty-select select {
            padding: 8px;
            font-size: 1rem;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        
        .success-animation {
            animation: successPulse 1s ease-in-out;
        }
        
        .failure-animation {
            animation: failurePulse 1s ease-in-out;
        }
        
        @keyframes successPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); background-color: rgba(76, 175, 80, 0.2); }
            100% { transform: scale(1); }
        }
        
        @keyframes failurePulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); background-color: rgba(255, 0, 0, 0.2); }
            100% { transform: scale(1); }
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 1.5rem;
            }
            
            .timer-display {
                font-size: 3rem;
            }
            
            .game-description {
                font-size: 0.9rem;
            }
            
            button {
                padding: 10px 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>专注力计时挑战</h1>
        
        <p class="game-description">
            设置一个目标时间，从0开始计时。尽量在精确的目标时间点停止！越接近目标时间停止，得分越高！时间单位为百分之一秒。
        </p>
        
        <div class="difficulty-select">
            <select id="difficultyLevel">
                <option value="easy">简单模式 (显示计时)</option>
                <option value="medium">中等模式 (仅显示进度条)</option>
                <option value="hard">困难模式 (无视觉提示)</option>
            </select>
        </div>
        
        <div class="controls">
            <div class="target-input">
                <input type="number" id="targetTimeInput" class="time-input" min="1" max="3000" value="100" placeholder="目标时间(百分之一秒)">
                <span>百分之一秒</span>
            </div>
            
            <button id="startButton">开始计时</button>
            <button id="stopButton" disabled>停止</button>
            <button id="resetButton">重置</button>
        </div>
        
        <div id="timerDisplay" class="timer-display">0.00</div>
        
        <div class="progress-container">
            <div id="progressBar" class="progress-bar"></div>
        </div>
        
        <div id="statusMessage" class="status-message"></div>
        
        <div id="scoreDisplay" class="hidden">
            <h2>你的得分: <span id="score">0</span>分</h2>
            <p id="feedback"></p>
        </div>
    </div>

    <script>
        // 获取DOM元素
        const targetTimeInput = document.getElementById('targetTimeInput');
        const startButton = document.getElementById('startButton');
        const stopButton = document.getElementById('stopButton');
        const resetButton = document.getElementById('resetButton');
        const timerDisplay = document.getElementById('timerDisplay');
        const progressBar = document.getElementById('progressBar');
        const statusMessage = document.getElementById('statusMessage');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const scoreElement = document.getElementById('score');
        const feedbackElement = document.getElementById('feedback');
        const difficultySelect = document.getElementById('difficultyLevel');
        
        // 游戏状态变量
        let timer;
        let targetTime = 0;       // 目标时间（百分之一秒）
        let currentTime = 0;      // 当前时间（百分之一秒）
        let isRunning = false;
        let difficulty = 'easy';
        
        // 初始化游戏
        function initialize() {
            updateTimerDisplay();
            difficultySelect.addEventListener('change', function() {
                difficulty = this.value;
                updateUIBasedOnDifficulty();
            });
        }
        
        // 根据难度更新UI
        function updateUIBasedOnDifficulty() {
            if (isRunning) {
                if (difficulty === 'easy') {
                    timerDisplay.classList.remove('hidden');
                    document.querySelector('.progress-container').classList.remove('hidden');
                } else if (difficulty === 'medium') {
                    timerDisplay.classList.add('hidden');
                    document.querySelector('.progress-container').classList.remove('hidden');
                } else if (difficulty === 'hard') {
                    timerDisplay.classList.add('hidden');
                    document.querySelector('.progress-container').classList.add('hidden');
                }
            }
        }
        
        // 更新计时器显示
        function updateTimerDisplay() {
            // 将百分之一秒转换为秒.百分之一秒格式
            const seconds = Math.floor(currentTime / 100);
            const centiseconds = currentTime % 100;
            timerDisplay.textContent = `${seconds}.${padZero(centiseconds)}`;
        }
        
        // 为个位数添加前导零
        function padZero(num) {
            return num < 10 ? `0${num}` : num;
        }
        
        // 开始计时
        function startTimer() {
            const targetValue = parseInt(targetTimeInput.value) || 100;
            
            // 验证输入
            if (targetValue <= 0) {
                statusMessage.textContent = "请设置有效的目标时间！";
                return;
            }
            
            targetTime = targetValue;
            currentTime = 0;
            
            // 更新UI状态
            startButton.disabled = true;
            stopButton.disabled = false;
            targetTimeInput.disabled = true;
            difficultySelect.disabled = true;
            scoreDisplay.classList.add('hidden');
            
            // 设置游戏状态
            isRunning = true;
            statusMessage.textContent = "计时开始！";
            
            // 根据难度更新UI
            updateUIBasedOnDifficulty();
            
            // 开始计时 (每10毫秒更新一次，即百分之一秒)
            updateTimerDisplay();
            updateProgressBar();
            
            timer = setInterval(() => {
                currentTime++;
                
                // 更新UI
                if (difficulty === 'easy') {
                    updateTimerDisplay();
                }
                updateProgressBar();
                
                // 如果超过目标时间的2倍，自动停止
                if (currentTime >= targetTime * 2) {
                    stopTimer();
                    calculateScore(true);
                }
            }, 10); // 10毫秒 = 百分之一秒
        }
        
        // 更新进度条
        function updateProgressBar() {
            // 基于目标时间的进度百分比，最大显示到100%
            const progressPercentage = Math.min((currentTime / targetTime) * 100, 100);
            progressBar.style.width = `${progressPercentage}%`;
        }
        
        // 停止计时
        function stopTimer() {
            if (!isRunning) return;
            
            clearInterval(timer);
            isRunning = false;
            
            // 更新UI状态
            stopButton.disabled = true;
            calculateScore();
        }
        
        // 计算得分
        function calculateScore(autoStopped = false) {
            let score = 0;
            let feedback = "";
            
            if (autoStopped) {
                // 自动停止 - 超时
                score = 0;
                feedback = "超过目标时间太多！下次请尝试在目标时间前停止。";
                statusMessage.textContent = "超时！";
                document.body.classList.add('failure-animation');
                setTimeout(() => document.body.classList.remove('failure-animation'), 1000);
            } else {
                // 计算与目标时间的接近程度
                const timeDifference = Math.abs(currentTime - targetTime);
                const accuracy = Math.max(0, 100 - (timeDifference / targetTime * 100));
                score = Math.round(accuracy);
                
                const actualTime = currentTime / 100; // 转换为秒
                const targetTimeInSeconds = targetTime / 100; // 转换为秒
                
                statusMessage.textContent = `你在 ${actualTime.toFixed(2)} 秒时停止，目标时间是 ${targetTimeInSeconds.toFixed(2)} 秒。`;
                
                // 根据分数提供反馈
                if (score >= 95) {
                    feedback = "惊人的专注力！几乎完美的时间感！";
                    document.body.classList.add('success-animation');
                    setTimeout(() => document.body.classList.remove('success-animation'), 1000);
                } else if (score >= 85) {
                    feedback = "太棒了！你有很好的时间感知能力！";
                    document.body.classList.add('success-animation');
                    setTimeout(() => document.body.classList.remove('success-animation'), 1000);
                } else if (score >= 70) {
                    feedback = "做得不错！继续练习可以提高你的专注力。";
                } else if (score >= 50) {
                    feedback = "还不错！多加练习，你会做得更好。";
                } else {
                    feedback = "需要提高！尝试更专注地感知时间流逝。";
                }
            }
            
            // 显示得分
            scoreElement.textContent = score;
            feedbackElement.textContent = feedback;
            scoreDisplay.classList.remove('hidden');
        }
        
        // 重置游戏
        function resetGame() {
            clearInterval(timer);
            isRunning = false;
            currentTime = 0;
            
            // 恢复UI状态
            startButton.disabled = false;
            stopButton.disabled = true;
            targetTimeInput.disabled = false;
            difficultySelect.disabled = false;
            
            // 重置进度条
            progressBar.style.width = '0%';
            
            // 重置显示
            timerDisplay.classList.remove('hidden');
            document.querySelector('.progress-container').classList.remove('hidden');
            
            statusMessage.textContent = "";
            updateTimerDisplay();
        }
        
        // 事件监听器
        startButton.addEventListener('click', startTimer);
        stopButton.addEventListener('click', stopTimer);
        resetButton.addEventListener('click', resetGame);
        
        // 初始化游戏
        initialize();
    </script>
</body>
</html>
