<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>注意力训练游戏 - Attention Trainers</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background-color: white;
            color: #333;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
            padding: 10px;
        }
        
        .game-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }
        
        .game-selector {
            display: flex;
            justify-content: center;
            margin-bottom: 10px;
        }
        
        .game-btn {
            padding: 10px 20px;
            margin: 0 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .game-btn:hover {
            background-color: #45a049;
        }
        
        .game-btn.active {
            background-color: #357a38;
            transform: scale(1.05);
        }
        
        .game-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .game-panel {
            display: none;
            width: 100%;
            height: 100%;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .game-panel.active {
            display: flex;
        }
        
        .game-title {
            font-size: 24px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .game-info {
            margin-bottom: 20px;
            text-align: center;
            font-size: 18px;
        }
        
        .game-board {
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            flex: 1;
            width: 100%;
            max-width: 500px;
            max-height: 500px;
            margin: 0 auto;
        }
        
        .number-search-board {
            display: grid;
            gap: 5px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f9f9f9;
            margin: 0 auto;
            width: 100%;
            height: 100%;
            max-width: 400px;
            max-height: 400px;
        }
        
        .number-cell {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .number-cell:hover {
            background-color: #f5f5f5;
        }
        
        .number-cell.correct {
            background-color: #4CAF50;
            color: white;
        }
        
        .number-cell.wrong {
            background-color: #f44336;
            color: white;
        }
        
        .click-game-board {
            position: relative;
            width: 100%;
            height: 100%;
            max-width: 400px;
            max-height: 400px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f9f9f9;
            overflow: hidden;
        }
        
        .target {
            position: absolute;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #4CAF50;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            transition: transform 0.1s;
        }
        
        .target:hover {
            transform: scale(1.1);
        }
        
        .controls {
            display: flex;
            margin-top: 20px;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .btn {
            padding: 8px 16px;
            background-color: #2196F3;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .btn:hover {
            background-color: #0b7dda;
        }
        
        .timer, .score, .level {
            font-size: 18px;
            margin: 5px 0;
        }
        
        .game-over {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }
        
        .game-over.active {
            display: flex;
        }
        
        .game-over h2 {
            font-size: 32px;
            margin-bottom: 20px;
        }
        
        .game-over p {
            font-size: 24px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 768px) {
            .game-btn {
                padding: 8px 12px;
                font-size: 14px;
            }
            
            .game-title {
                font-size: 20px;
            }
            
            .game-info {
                font-size: 16px;
            }
            
            .number-cell {
                font-size: 16px;
            }
            
            .target {
                width: 35px;
                height: 35px;
            }
        }
        
        @media (max-width: 480px) {
            .game-btn {
                padding: 6px 10px;
                font-size: 12px;
            }
            
            .game-title {
                font-size: 18px;
            }
            
            .game-info {
                font-size: 14px;
            }
            
            .number-cell {
                font-size: 14px;
            }
            
            .target {
                width: 30px;
                height: 30px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="game-selector">
            <button class="game-btn active" id="number-search-btn">数字搜索游戏</button>
            <button class="game-btn" id="click-game-btn">专注力点击游戏</button>
        </div>
        
        <div class="game-area">
            <!-- 数字搜索游戏 -->
            <div class="game-panel active" id="number-search-game">
                <h2 class="game-title">数字搜索训练</h2>
                <div class="game-info">
                    <div class="timer">时间: <span id="ns-timer">60</span>秒</div>
                    <div class="score">得分: <span id="ns-score">0</span></div>
                    <div class="level">当前查找: <span id="ns-target">1</span></div>
                </div>
                <div class="game-board">
                    <div class="number-search-board" id="ns-board"></div>
                </div>
                <div class="controls">
                    <button class="btn" id="ns-start">开始游戏</button>
                    <button class="btn" id="ns-difficulty">难度: 简单</button>
                </div>
                <div class="game-over" id="ns-game-over">
                    <h2>游戏结束</h2>
                    <p>您的得分: <span id="ns-final-score">0</span></p>
                    <button class="btn" id="ns-restart">再玩一次</button>
                </div>
            </div>
            
            <!-- 专注力点击游戏 -->
            <div class="game-panel" id="click-game">
                <h2 class="game-title">专注力点击训练</h2>
                <div class="game-info">
                    <div class="timer">时间: <span id="cg-timer">30</span>秒</div>
                    <div class="score">得分: <span id="cg-score">0</span></div>
                    <div class="level">等级: <span id="cg-level">1</span></div>
                </div>
                <div class="game-board">
                    <div class="click-game-board" id="cg-board"></div>
                </div>
                <div class="controls">
                    <button class="btn" id="cg-start">开始游戏</button>
                </div>
                <div class="game-over" id="cg-game-over">
                    <h2>游戏结束</h2>
                    <p>您的得分: <span id="cg-final-score">0</span></p>
                    <button class="btn" id="cg-restart">再玩一次</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 游戏切换逻辑
        const numberSearchBtn = document.getElementById('number-search-btn');
        const clickGameBtn = document.getElementById('click-game-btn');
        const numberSearchGame = document.getElementById('number-search-game');
        const clickGame = document.getElementById('click-game');
        
        numberSearchBtn.addEventListener('click', () => {
            numberSearchBtn.classList.add('active');
            clickGameBtn.classList.remove('active');
            numberSearchGame.classList.add('active');
            clickGame.classList.remove('active');
        });
        
        clickGameBtn.addEventListener('click', () => {
            clickGameBtn.classList.add('active');
            numberSearchBtn.classList.remove('active');
            clickGame.classList.add('active');
            numberSearchGame.classList.remove('active');
        });
        
        // 数字搜索游戏逻辑
        const nsBoard = document.getElementById('ns-board');
        const nsStartBtn = document.getElementById('ns-start');
        const nsDifficultyBtn = document.getElementById('ns-difficulty');
        const nsTimer = document.getElementById('ns-timer');
        const nsScore = document.getElementById('ns-score');
        const nsTarget = document.getElementById('ns-target');
        const nsGameOver = document.getElementById('ns-game-over');
        const nsFinalScore = document.getElementById('ns-final-score');
        const nsRestartBtn = document.getElementById('ns-restart');
        
        let nsIsPlaying = false;
        let nsTimeLeft = 60;
        let nsCurrentScore = 0;
        let nsCurrentTarget = 1;
        let nsInterval;
        let nsDifficulty = 'easy'; // easy, medium, hard
        let nsGridSize = 5;
        let nsNumberRange = 30;
        
        function nsSetupGame() {
            // 根据难度设置参数
            switch (nsDifficulty) {
                case 'easy':
                    nsGridSize = 5;
                    nsNumberRange = 30;
                    break;
                case 'medium':
                    nsGridSize = 6;
                    nsNumberRange = 50;
                    break;
                case 'hard':
                    nsGridSize = 8;
                    nsNumberRange = 99;
                    break;
            }
            
            // 设置棋盘样式
            nsBoard.style.gridTemplateColumns = `repeat(${nsGridSize}, 1fr)`;
            nsBoard.style.gridTemplateRows = `repeat(${nsGridSize}, 1fr)`;
            
            // 清空棋盘
            nsBoard.innerHTML = '';
            
            // 生成随机数字
            let numbers = [];
            let hasTarget = false;
            
            for (let i = 0; i < nsGridSize * nsGridSize; i++) {
                let randomNum = Math.floor(Math.random() * nsNumberRange) + 1;
                
                // 确保目标数字至少出现一次
                if (randomNum === nsCurrentTarget) {
                    hasTarget = true;
                }
                
                numbers.push(randomNum);
            }
            
            // 如果没有目标数字，随机替换一个位置
            if (!hasTarget) {
                let randomPos = Math.floor(Math.random() * numbers.length);
                numbers[randomPos] = nsCurrentTarget;
            }
            
            // 创建单元格
            numbers.forEach(num => {
                const cell = document.createElement('div');
                cell.className = 'number-cell';
                cell.textContent = num;
                
                cell.addEventListener('click', () => {
                    if (!nsIsPlaying) return;
                    
                    if (parseInt(cell.textContent) === nsCurrentTarget) {
                        cell.classList.add('correct');
                        nsCurrentScore += 10;
                        nsScore.textContent = nsCurrentScore;
                        
                        // 进入下一个目标
                        nsCurrentTarget++;
                        nsTarget.textContent = nsCurrentTarget;
                        
                        // 短暂延迟后刷新棋盘
                        setTimeout(() => {
                            nsSetupGame();
                        }, 300);
                    } else {
                        // 错误点击减分
                        cell.classList.add('wrong');
                        nsCurrentScore = Math.max(0, nsCurrentScore - 5);
                        nsScore.textContent = nsCurrentScore;
                        
                        // 短暂显示错误后恢复
                        setTimeout(() => {
                            cell.classList.remove('wrong');
                        }, 300);
                    }
                });
                
                nsBoard.appendChild(cell);
            });
        }
        
        function nsStartGame() {
            nsIsPlaying = true;
            nsCurrentScore = 0;
            nsCurrentTarget = 1;
            nsTimeLeft = 60;
            
            nsScore.textContent = nsCurrentScore;
            nsTarget.textContent = nsCurrentTarget;
            nsTimer.textContent = nsTimeLeft;
            
            nsStartBtn.disabled = true;
            nsDifficultyBtn.disabled = true;
            nsGameOver.classList.remove('active');
            
            nsSetupGame();
            
            // 启动计时器
            nsInterval = setInterval(() => {
                nsTimeLeft--;
                nsTimer.textContent = nsTimeLeft;
                
                if (nsTimeLeft <= 0) {
                    nsEndGame();
                }
            }, 1000);
        }
        
        function nsEndGame() {
            nsIsPlaying = false;
            clearInterval(nsInterval);
            
            nsStartBtn.disabled = false;
            nsDifficultyBtn.disabled = false;
            
            nsFinalScore.textContent = nsCurrentScore;
            nsGameOver.classList.add('active');
        }
        
        // 切换难度
        nsDifficultyBtn.addEventListener('click', () => {
            if (nsIsPlaying) return;
            
            switch (nsDifficulty) {
                case 'easy':
                    nsDifficulty = 'medium';
                    nsDifficultyBtn.textContent = '难度: 中等';
                    break;
                case 'medium':
                    nsDifficulty = 'hard';
                    nsDifficultyBtn.textContent = '难度: 困难';
                    break;
                case 'hard':
                    nsDifficulty = 'easy';
                    nsDifficultyBtn.textContent = '难度: 简单';
                    break;
            }
            
            nsSetupGame();
        });
        
        nsStartBtn.addEventListener('click', nsStartGame);
        nsRestartBtn.addEventListener('click', nsStartGame);
        
        // 初始化数字搜索游戏
        nsSetupGame();
        
        // 专注力点击游戏逻辑
        const cgBoard = document.getElementById('cg-board');
        const cgStartBtn = document.getElementById('cg-start');
        const cgTimer = document.getElementById('cg-timer');
        const cgScore = document.getElementById('cg-score');
        const cgLevel = document.getElementById('cg-level');
        const cgGameOver = document.getElementById('cg-game-over');
        const cgFinalScore = document.getElementById('cg-final-score');
        const cgRestartBtn = document.getElementById('cg-restart');
        
        let cgIsPlaying = false;
        let cgTimeLeft = 30;
        let cgCurrentScore = 0;
        let cgCurrentLevel = 1;
        let cgInterval;
        let cgTargetTimeout;
        let cgTargetSpeed = 2000; // 目标出现间隔时间（毫秒）
        let cgActiveTarget = null;
        let cgTargetValue = 1; // 目标上的数字值
        
        function cgSpawnTarget() {
            // 清除之前的目标
            if (cgActiveTarget) {
                cgBoard.removeChild(cgActiveTarget);
                cgActiveTarget = null;
            }
            
            // 创建新目标
            const target = document.createElement('div');
            target.className = 'target';
            
            // 随机位置（考虑目标大小）
            const boardRect = cgBoard.getBoundingClientRect();
            const targetSize = cgCurrentLevel <= 3 ? 40 : cgCurrentLevel <= 6 ? 35 : 30;
            
            const maxX = boardRect.width - targetSize;
            const maxY = boardRect.height - targetSize;
            
            const posX = Math.floor(Math.random() * maxX);
            const posY = Math.floor(Math.random() * maxY);
            
            target.style.width = `${targetSize}px`;
            target.style.height = `${targetSize}px`;
            target.style.left = `${posX}px`;
            target.style.top = `${posY}px`;
            
            // 设置目标文本
            target.textContent = cgTargetValue;
            
            target.addEventListener('click', () => {
                if (!cgIsPlaying) return;
                
                // 增加分数
                cgCurrentScore += cgCurrentLevel * 10;
                cgScore.textContent = cgCurrentScore;
                
                // 清除当前目标
                cgBoard.removeChild(target);
                cgActiveTarget = null;
                
                // 检查是否升级
                if (cgCurrentScore >= cgCurrentLevel * 100) {
                    cgCurrentLevel++;
                    cgLevel.textContent = cgCurrentLevel;
                    cgTargetSpeed = Math.max(800, 2000 - (cgCurrentLevel * 200));
                }
                
                // 增加目标值
                cgTargetValue++;
                
                // 生成新目标
                clearTimeout(cgTargetTimeout);
                cgTargetTimeout = setTimeout(cgSpawnTarget, 300);
            });
            
            cgBoard.appendChild(target);
            cgActiveTarget = target;
            
            // 目标消失时间（根据等级调整）
            const disappearTime = Math.max(1000, 3000 - (cgCurrentLevel * 200));
            
            // 如果用户未点击，一段时间后目标消失
            cgTargetTimeout = setTimeout(() => {
                if (cgActiveTarget) {
                    cgBoard.removeChild(cgActiveTarget);
                    cgActiveTarget = null;
                    
                    // 如果错过目标，扣分
                    cgCurrentScore = Math.max(0, cgCurrentScore - 5);
                    cgScore.textContent = cgCurrentScore;
                }
                
                // 如果游戏仍在进行，生成新目标
                if (cgIsPlaying) {
                    cgTargetTimeout = setTimeout(cgSpawnTarget, cgTargetSpeed);
                }
            }, disappearTime);
        }
        
        function cgStartGame() {
            cgIsPlaying = true;
            cgCurrentScore = 0;
            cgCurrentLevel = 1;
            cgTimeLeft = 30;
            cgTargetValue = 1;
            
            cgScore.textContent = cgCurrentScore;
            cgLevel.textContent = cgCurrentLevel;
            cgTimer.textContent = cgTimeLeft;
            
            cgStartBtn.disabled = true;
            cgGameOver.classList.remove('active');
            
            // 清除之前的目标
            if (cgActiveTarget) {
                cgBoard.removeChild(cgActiveTarget);
                cgActiveTarget = null;
            }
            
            // 生成第一个目标
            cgSpawnTarget();
            
            // 启动计时器
            cgInterval = setInterval(() => {
                cgTimeLeft--;
                cgTimer.textContent = cgTimeLeft;
                
                if (cgTimeLeft <= 0) {
                    cgEndGame();
                }
            }, 1000);
        }
        
        function cgEndGame() {
            cgIsPlaying = false;
            clearInterval(cgInterval);
            clearTimeout(cgTargetTimeout);
            
            // 清除活动目标
            if (cgActiveTarget) {
                cgBoard.removeChild(cgActiveTarget);
                cgActiveTarget = null;
            }
            
            cgStartBtn.disabled = false;
            
            cgFinalScore.textContent = cgCurrentScore;
            cgGameOver.classList.add('active');
        }
        
        cgStartBtn.addEventListener('click', cgStartGame);
        cgRestartBtn.addEventListener('click', cgStartGame);
        
        // 初始化界面设置
        window.addEventListener('resize', () => {
            // 调整游戏界面以适应屏幕
            if (nsBoard) {
                const boardSize = Math.min(
                    document.querySelector('.game-board').offsetWidth,
                    document.querySelector('.game-board').offsetHeight
                );
                nsBoard.style.maxWidth = `${boardSize}px`;
                nsBoard.style.maxHeight = `${boardSize}px`;
            }
        });
        
        // 初始触发一次调整
        setTimeout(() => {
            window.dispatchEvent(new Event('resize'));
        }, 100);
    </script>
</body>
</html>
