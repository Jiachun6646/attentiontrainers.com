<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>专注力计时挑战</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background-color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            width: 100%;
            overflow: hidden;
        }
        
        .container {
            width: 90%;
            max-width: 600px;
            text-align: center;
        }
        
        h1 {
            color: #333;
            margin-bottom: 20px;
            font-size: 2rem;
        }
        
        .game-description {
            color: #666;
            margin-bottom: 30px;
            font-size: 1rem;
            line-height: 1.5;
        }
        
        .timer-display {
            font-size: 5rem;
            font-weight: bold;
            color: #333;
            margin: 20px 0;
        }
        
        .controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .time-inputs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .time-input {
            padding: 8px;
            font-size: 1rem;
            width: 70px;
            text-align: center;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        
        button {
            padding: 12px 20px;
            font-size: 1rem;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #45a049;
        }
        
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        
        .progress-container {
            width: 100%;
            height: 20px;
            background-color: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress-bar {
            height: 100%;
            background-color: #4CAF50;
            width: 0%;
            transition: width 0.1s linear;
        }
        
        .status-message {
            font-size: 1.2rem;
            margin: 10px 0;
            min-height: 1.5em;
        }
        
        .hidden {
            display: none;
        }

        .difficulty-select {
            margin-bottom: 15px;
        }
        
        .difficulty-select select {
            padding: 8px;
            font-size: 1rem;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        
        .success-animation {
            animation: successPulse 1s ease-in-out;
        }
        
        .failure-animation {
            animation: failurePulse 1s ease-in-out;
        }
        
        @keyframes successPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); background-color: rgba(76, 175, 80, 0.2); }
            100% { transform: scale(1); }
        }
        
        @keyframes failurePulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); background-color: rgba(255, 0, 0, 0.2); }
            100% { transform: scale(1); }
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 1.5rem;
            }
            
            .timer-display {
                font-size: 3rem;
            }
            
            .game-description {
                font-size: 0.9rem;
            }
            
            button {
                padding: 10px 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>专注力计时挑战</h1>
        
        <p class="game-description">
            设置一个目标时间，然后开始计时。尝试在达到目标时间时点击停止按钮。越接近目标时间停止，得分越高！
        </p>
        
        <div class="difficulty-select">
            <select id="difficultyLevel">
                <option value="easy">简单模式 (显示计时器)</option>
                <option value="medium">中等模式 (仅显示进度条)</option>
                <option value="hard">困难模式 (无视觉提示)</option>
            </select>
        </div>
        
        <div class="controls">
            <div class="time-inputs">
                <input type="number" id="targetSecondsInput" class="time-input" min="1" max="60" value="10" placeholder="秒数">
            </div>
            
            <button id="startButton">开始计时</button>
            <button id="stopButton" disabled>停止</button>
            <button id="resetButton">重置</button>
        </div>
        
        <div id="timerDisplay" class="timer-display">00:00:00</div>
        
        <div class="progress-container">
            <div id="progressBar" class="progress-bar"></div>
        </div>
        
        <div id="statusMessage" class="status-message"></div>
        
        <div id="scoreDisplay" class="hidden">
            <h2>你的得分: <span id="score">0</span>分</h2>
            <p id="feedback"></p>
        </div>
    </div>

    <script>
        // 获取DOM元素
        const targetSecondsInput = document.getElementById('targetSecondsInput');
        const startButton = document.getElementById('startButton');
        const stopButton = document.getElementById('stopButton');
        const resetButton = document.getElementById('resetButton');
        const timerDisplay = document.getElementById('timerDisplay');
        const progressBar = document.getElementById('progressBar');
        const statusMessage = document.getElementById('statusMessage');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const scoreElement = document.getElementById('score');
        const feedbackElement = document.getElementById('feedback');
        const difficultySelect = document.getElementById('difficultyLevel');
        
        // 游戏状态变量
        let timer;
        let targetTime = 0; // 目标时间（秒）
        let elapsedTime = 0; // 已经过的时间（百分之一秒）
        let isRunning = false;
        let difficulty = 'easy';
        let updateInterval = 10; // 每10毫秒更新一次（百分之一秒）
        
        // 初始化游戏
        function initialize() {
            updateTimerDisplay();
            difficultySelect.addEventListener('change', function() {
                difficulty = this.value;
                updateUIBasedOnDifficulty();
            });
        }
        
        // 根据难度更新UI
        function updateUIBasedOnDifficulty() {
            if (isRunning) {
                if (difficulty === 'easy') {
                    timerDisplay.classList.remove('hidden');
                    document.querySelector('.progress-container').classList.remove('hidden');
                } else if (difficulty === 'medium') {
                    timerDisplay.classList.add('hidden');
                    document.querySelector('.progress-container').classList.remove('hidden');
                } else if (difficulty === 'hard') {
                    timerDisplay.classList.add('hidden');
                    document.querySelector('.progress-container').classList.add('hidden');
                }
            }
        }
        
        // 更新计时器显示
        function updateTimerDisplay() {
            const hundredths = elapsedTime % 100;
            const seconds = Math.floor(elapsedTime / 100) % 60;
            const minutes = Math.floor(elapsedTime / 6000);
            
            timerDisplay.textContent = `${padZero(minutes)}:${padZero(seconds)}:${padZero(hundredths)}`;
        }
        
        // 为个位数添加前导零
        function padZero(num) {
            return num < 10 ? `0${num}` : num;
        }
        
        // 开始计时
        function startTimer() {
            const targetSeconds = parseInt(targetSecondsInput.value) || 0;
            
            // 验证输入
            if (targetSeconds <= 0) {
                statusMessage.textContent = "请设置有效的目标时间！";
                return;
            }
            
            targetTime = targetSeconds * 100; // 转换为百分之一秒
            elapsedTime = 0;
            
            // 更新UI状态
            startButton.disabled = true;
            stopButton.disabled = false;
            targetSecondsInput.disabled = true;
            difficultySelect.disabled = true;
            scoreDisplay.classList.add('hidden');
            
            // 设置游戏状态
            isRunning = true;
            statusMessage.textContent = "计时开始！";
            
            // 根据难度更新UI
            updateUIBasedOnDifficulty();
            
            // 开始计时
            updateTimerDisplay();
            
            timer = setInterval(() => {
                elapsedTime++;
                
                // 更新UI
                if (difficulty === 'easy') {
                    updateTimerDisplay();
                }
                
                // 更新进度条
                updateProgressBar();
                
                // 如果超过目标时间的两倍，自动停止
                if (elapsedTime >= targetTime * 2) {
                    stopTimer();
                }
            }, updateInterval);
        }
        
        // 更新进度条
        function updateProgressBar() {
            // 计算进度百分比，最大为100%
            const progressPercentage = Math.min((elapsedTime / targetTime) * 100, 100);
            progressBar.style.width = `${progressPercentage}%`;
        }
        
        // 停止计时
        function stopTimer() {
            if (!isRunning) return;
            
            clearInterval(timer);
            isRunning = false;
            
            // 计算得分和提供反馈
            calculateScore();
            
            // 更新UI状态
            stopButton.disabled = true;
            resetButton.disabled = false;
        }
        
        // 计算得分
        function calculateScore() {
            // 计算与目标时间的差距（百分之一秒）
            const timeDifference = Math.abs(elapsedTime - targetTime);
            
            // 计算精确度（基于与目标的接近程度）
            const accuracy = Math.max(0, 100 - (timeDifference / targetTime) * 100);
            
            // 四舍五入到整数
            const score = Math.round(accuracy);
            
            // 根据分数提供反馈
            let feedback = "";
            
            if (score >= 95) {
                feedback = "惊人的专注力！几乎完美的时间感！";
                document.body.classList.add('success-animation');
                setTimeout(() => document.body.classList.remove('success-animation'), 1000);
            } else if (score >= 85) {
                feedback = "太棒了！你有很好的时间感知能力！";
                document.body.classList.add('success-animation');
                setTimeout(() => document.body.classList.remove('success-animation'), 1000);
            } else if (score >= 70) {
                feedback = "做得不错！继续练习可以提高你的专注力。";
            } else if (score >= 50) {
                feedback = "还不错！多加练习，你会做得更好。";
            } else {
                feedback = "需要提高！尝试更专注地感知时间流逝。";
                document.body.classList.add('failure-animation');
                setTimeout(() => document.body.classList.remove('failure-animation'), 1000);
            }
            
            // 显示详细的时间差异信息
            const targetTimeFormatted = formatTime(targetTime);
            const actualTimeFormatted = formatTime(elapsedTime);
            const differenceFormatted = formatTime(timeDifference);
            
            statusMessage.textContent = `目标时间：${targetTimeFormatted}，你的时间：${actualTimeFormatted}，相差：${differenceFormatted}`;
            
            // 显示得分
            scoreElement.textContent = score;
            feedbackElement.textContent = feedback;
            scoreDisplay.classList.remove('hidden');
        }
        
        // 格式化时间显示（转换百分之一秒为可读格式）
        function formatTime(hundredths) {
            const seconds = Math.floor(hundredths / 100);
            const remainder = hundredths % 100;
            return `${seconds}.${padZero(remainder)}秒`;
        }
        
        // 重置游戏
        function resetGame() {
            clearInterval(timer);
            isRunning = false;
            elapsedTime = 0;
            
            // 恢复UI状态
            startButton.disabled = false;
            stopButton.disabled = true;
            targetSecondsInput.disabled = false;
            difficultySelect.disabled = false;
            
            // 重置进度条
            progressBar.style.width = '0%';
            
            // 重置显示
            timerDisplay.classList.remove('hidden');
            document.querySelector('.progress-container').classList.remove('hidden');
            
            statusMessage.textContent = "";
            updateTimerDisplay();
        }
        
        // 事件监听器
        startButton.addEventListener('click', startTimer);
        stopButton.addEventListener('click', stopTimer);
        resetButton.addEventListener('click', resetGame);
        
        // 初始化游戏
        initialize();
    </script>
</body>
</html>
